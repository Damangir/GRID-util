{"name":"Grid-util","tagline":"Utility script for work with the N4U Grid.","body":"GRID-util: Utility script for work with the N4U Grid\r\n=======\r\n\r\nTable of Content\r\n-------\r\n\r\n* [Introduction](#introduction)\r\n* [Installation](#installation)\r\n* [Manual](#manual)\r\n  * [Copy files between user interface and storage element back and forth](#copy-files-tofrom-storage-element)\r\n  * [Automatic jobfile creation](#create-a-job-file-automatically)\r\n* [Copyright](#copyright)\r\n* [License](#license)\r\n\r\nIntroduction\r\n-------\r\nGrid-util is a set of tool to facilitate working with the [N4U grid](https://neugrid4you.eu/) in the command-line mode.\r\n\r\n**Grid-util is NOT endorsed by the [N4U Consortium](https://neugrid4you.eu/partners).**\r\n\r\nInstallation\r\n-------\r\nDownload the package using `curl`\r\n```bash\r\ncurl -O https://github.com/Damangir/GRID-util/archive/master.zip\r\n```\r\nor using `wget`\r\n```bash\r\nwget https://github.com/Damangir/GRID-util/archive/master.zip\r\n```\r\nThen decopmress the files.\r\n```bash\r\nunzip master.zip\r\n```\r\nIf you have administrative right install using:\r\n```bash\r\nsudo su\r\n. GRID-util-master/install.sh\r\n```\r\notherwise use:\r\n```bash\r\n. GRID-util-master/install.sh\r\n```\r\nNow you can check installation by:\r\n```bash\r\ngrid-copy.sh -h\r\n```\r\n\r\nIf you install in admin mode and ever want to uninstall GRID-util you can do so by:\r\n```bash\r\nsudo su -\r\nuninstall-GRID-util\r\n```\r\n\r\nManual\r\n-------\r\n### Copy files to/from storage element\r\n\r\nYou can use `grid-copy.sh` to copy batch files between user interface and storage elemet back and forth.\r\n\r\n```\r\nusage: grid-copy.sh options\r\n\r\nCopies batch of files back and forth to the grid.\r\n\r\nOPTIONS:\r\n   -l      Local directory (in interface, e.g. ~/MyShares/n4u/to-process)\r\n   -g      Grid directory  (in the grid)\r\n   -p      Pattern for files to be copied (default *.nii.gz)\r\n\r\n   -d      Download images from the GRID\r\n   -u      Upload images to the GRID (default)\r\n   -r      Retry count on copy failure (default 5)\r\n   \r\n   -f      Run from fail file generated with previous runs. This option will \r\n           supress all other options.\r\n   \r\n   -h      Show this message\r\n```\r\n\r\nFor example in order to copy all `nii.gz` files from `~/MyShares/to-process` folder in user interface to `$PANDORA_GRID_HOME/input` storage element you can use:\r\n```bash\r\ngrid-copy.sh -l ~/MyShares/to-process -g $PANDORA_GRID_HOME/input -p \"*.nii.gz\" -u\r\n```\r\n\r\nAfter you process data, suppose the your output is in `$PANDORA_GRID_HOME/output` and is in `tar.bz` format. To bring them back to `~/MyShares/processed` you can use:\r\n```bash\r\ngrid-copy.sh -g $PANDORA_GRID_HOME/output -l ~/MyShares/processed -p \"*.tar.bz\" -d\r\n```\r\nThe `grid-copy.sh` will produce a file called `copy_fail`. If any copy failed you will be notified with a note like:\r\n```\r\nThere is/are 1 failing(s) in the batch process. The failing processes are written in copy_fail_131122_175431.sh.                                                                                                                                        \r\nYou can re-run them using gridcopy.sh -f copy_fail_131122_175431.sh\r\n```\r\n\r\nAs adviced in the note you can re-run failed copies using:\r\n```bash\r\ngrid-copy.sh -f copy_fail_131122_175431.sh\r\n```\r\n\r\nThe digits at the end the file name means its for the copying on 22 November 2013 17:54:31. If you have many `copy_fail` files, make sure you are using the one you intend to use.\r\n\r\n### Create a job file automatically\r\n\r\nYou can use `grid-jobfile.sh` to create a [jobfile](https://neugrid4you.eu/group/science-gateway/knowledge-base/-/wiki/Main/Express+Lane) when you want to run jobs with `inputDir` located in the grid storage elements (`lfn:`).\r\n\r\n```\r\nusage: grid-jobfile.sh OPTIONS\r\n\r\nCreates job file for files in a directory.\r\n\r\nOPTIONS:\r\n   -g      Grid directory  (in the grid)\r\n   -p      Pattern for files to be added to jobfile (default *.nii.gz)\r\n   -o      Output Jobfile (default only prints it)\r\n   -r      Retry count on copy failure (default 5)\r\n   \r\n   -h      Show this message\r\n```\r\n\r\n\r\nCopyright\r\n-------\r\nCopyright (C) 2013 [Soheil Damangir](http://www.linkedin.com/in/soheildamangir) - All Rights Reserved\r\n\r\nLicense\r\n-------\r\n[![Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License](https://raw.github.com/Damangir/GRID-util/master/licence.png \"Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License\")](http://creativecommons.org/licenses/by-nc-sa/3.0/)\r\n\r\nGRID-util by [Soheil Damangir](http://www.linkedin.com/in/soheildamangir) is licensed under a [Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License](http://creativecommons.org/licenses/by-nc-sa/3.0/). To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/3.0/.\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}