<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>GRID-util: Utility script for work with the N4U Grid</title>

<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 12px;
   margin: 8px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 { 
   font-size:2.2em; 
}

h2 { 
   font-size:1.8em; 
}

h3 { 
   font-size:1.4em; 
}

h4 { 
   font-size:1.0em; 
}

h5 { 
   font-size:0.9em; 
}

h6 { 
   font-size:0.8em; 
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre {	
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
   white-space: pre-wrap;
}

pre code {
   display: block; padding: 0.5em;
}

code.r, code.cpp {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * { 
      background: transparent !important; 
      color: black !important; 
      filter:none !important; 
      -ms-filter: none !important; 
   }

   body { 
      font-size:12pt; 
      max-width:100%; 
   }
       
   a, a:visited { 
      text-decoration: underline; 
   }

   hr { 
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote { 
      padding-right: 1em; 
      page-break-inside: avoid; 
   }

   tr, img { 
      page-break-inside: avoid; 
   }

   img { 
      max-width: 100% !important; 
   }

   @page :left { 
      margin: 15mm 20mm 15mm 10mm; 
   }
     
   @page :right { 
      margin: 15mm 10mm 15mm 20mm; 
   }

   p, h2, h3 { 
      orphans: 3; widows: 3; 
   }

   h2, h3 { 
      page-break-after: avoid; 
   }
}

</style>





</head>

<body>
<h1>GRID-util: Utility script for work with the N4U Grid</h1>

<h2>Installation</h2>

<p>Download the package using <code>curl</code></p>

<pre><code class="bash">curl -O https://github.com/Damangir/GRID-util/archive/master.zip
</code></pre>

<p>or using <code>wget</code></p>

<pre><code class="bash">wget https://github.com/Damangir/GRID-util/archive/master.zip
</code></pre>

<p>Then decopmress the files.</p>

<pre><code class="bash">unzip master.zip
</code></pre>

<p>If you have administrative right install using:</p>

<pre><code class="bash">sudo su
. GRID-util-master/install.sh
</code></pre>

<p>otherwise use:</p>

<pre><code class="bash">. GRID-util-master/install.sh
</code></pre>

<p>Now you can check installation by:</p>

<pre><code class="bash">gridcopy.sh -h
</code></pre>

<p>If you install in admin mode and ever want to uninstall GRID-util you can do so by:</p>

<pre><code class="bash">sudo su -
uninstall-GRID-util
</code></pre>

<h2>Manual</h2>

<h3>Copy files to/from storage element</h3>

<p>You can use <code>gridcopy.sh</code> to copy batch files between user interface and storage elemet back and forth.</p>

<pre><code>usage: gridcopy.sh options

Copies batch of files back and forth to the grid.

OPTIONS:
   -l      Local directory (in interface, e.g. ~/MyShares/n4u/to-process)
   -g      Grid directory  (in the grid)
   -p      Pattern for files to be copied (default *.nii.gz)

   -d      Download images from the GRID
   -u      Upload images to the GRID (default)
   -r      Retry count on copy failure (default 5)

   -f      Run from fail file generated with previous runs. This option will 
           supress all other options.

   -h      Show this message
</code></pre>

<p>For example in order to copy all <code>nii.gz</code> files from <code>~/MyShares/to-process</code> folder in user interface to <code>$PANDORA_GRID_HOME/input</code> storage element you can use:</p>

<pre><code class="bash">gridcopy.sh -l ~/MyShares/to-process -g $PANDORA_GRID_HOME/input -p &quot;*.nii.gz&quot; -u
</code></pre>

<p>After you process data, suppose the your output is in <code>$PANDORA_GRID_HOME/output</code> and is in <code>tar.bz</code> format. To bring them back to <code>~/MyShares/processed</code> you can use:</p>

<pre><code class="bash">gridcopy.sh -g $PANDORA_GRID_HOME/output -l ~/MyShares/processed -p &quot;*.tar.bz&quot; -d
</code></pre>

<p>The <code>gridcopy.sh</code> will produce a file called <code>copy_fail</code>. If any copy failed you will be notified with a note like:</p>

<pre><code>There is/are 1 failing(s) in the batch process. The failing processes are written in copy_fail_131122_175431.sh.                                                                                                                                        
You can re-run them using gridcopy.sh -f copy_fail_131122_175431.sh
</code></pre>

<p>As adviced in the note you can re-run failed copies using:</p>

<pre><code class="bash">gridcopy.sh -f copy_fail_131122_175431.sh
</code></pre>

<p>The digits at the end the file name means its for the copying on 22 November 2013 17:54:31. If you have many <code>copy_fail</code> files, make sure you are using the one you intend to use.</p>

<h2>Copyright</h2>

<p>Copyright &copy; 2013 Soheil Damangir - All Rights Reserved</p>

<h2>Licence</h2>

<p><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="https://raw.github.com/Damangir/GRID-util/master/licence.png" alt="Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License" title="Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License"/></a></p>

<p>GRID-util by <a href="http://www.linkedin.com/in/soheildamangir">Soheil Damangir</a> is licensed under a <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>. To view a copy of this license, visit <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">http://creativecommons.org/licenses/by-nc-sa/3.0/</a>.</p>

</body>

</html>

